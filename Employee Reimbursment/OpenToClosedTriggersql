CREATE OR REPLACE TRIGGER MOVETOCLOSED
AFTER UPDATE ON OPENREQUESTS FOR EACH ROW
WHEN (STATUSID = 1)
DECLARE 
    REQUEST_ID NUMBER;
    EMP_ID NUMBER;
    STATUS_ID NUMBER;
    AMOUNT NUMBER;
    OPENDATE TIMESTAMP;
    NOTES VARCHAR2;
    RECEIPTPHOTO BLOB;
BEGIN
    REQUEST_ID := :NEW.REQUESTID; EMP_ID:= :NEW.EMPID; STATUS_ID:= :NEW.STATUSID; AMMOUNT:= :NEW.AMMOUT; 
    OPENDATE:= :NEW.OPENDATE; NOTES:= :NEW.NOTES; RECEIPTPHOTO:= :NEW.RECEIPTPHOTO;
    INSERT INTO CLOSEDREQUEST
        VALUES(REQUEST_ID, EMP_ID, STATUS_ID, AMMOUNT, OPENDATE, SYSTIMESTAMP, NOTES, RECEIPTPHOTO, (NULL));
END;
/
        
    
    